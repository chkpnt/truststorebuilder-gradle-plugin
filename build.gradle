buildscript {
	repositories.maven { url 'https://plugins.gradle.org/m2/' }
	//repositories { mavenCentral() }
	dependencies {
		classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:1.3.60"
	}
}

apply plugin: 'groovy'
apply plugin: 'kotlin'
apply plugin: 'java-gradle-plugin'

group = 'de.chkpnt'
description = "Building Java TrustStores with Gradle."

def setToDefaultIfNotExists(property, defaultValue) {
	if (!project.hasProperty(property)) {
		project.ext.setProperty(property, defaultValue)
	}
}

repositories {
	jcenter()
}

compileGroovy {
	groovyOptions.encoding = 'UTF-8'
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

compileKotlin {
	kotlinOptions {
		jvmTarget = "1.8"
	}
}
compileTestKotlin {
	kotlinOptions {
		jvmTarget = "1.8"
	}
}

dependencies {
	compile gradleApi()
	implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.3.60"

	testCompile localGroovy()
	testCompile gradleTestKit()
	testCompile 'commons-io:commons-io:2.2'
	testCompile 'com.google.jimfs:jimfs:1.0'      // In-Memory Filesystem
	testCompile 'org.spockframework:spock-core:1.0-groovy-2.4', {
		exclude group: 'org.codehaus.groovy'
	}
	testCompile 'cglib:cglib-nodep:3.2.0'
	testCompile 'org.hamcrest:hamcrest-all:1.3'
}

wrapper {
	gradleVersion = '4.10.3'
	distributionUrl = 'https://services.gradle.org/distributions/gradle-4.10.3-all.zip'
}

apply from: 'gradle/versioning.gradle'
apply from: 'gradle/docs.gradle'
apply from: 'gradle/publish.gradle'
apply from: 'gradle/spotless.gradle'
apply from: 'gradle/qa.gradle'
